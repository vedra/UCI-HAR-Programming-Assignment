print("Writing in the text file:")
variables_range <- 3:(length(colnames(data)))
for (i in variables_range){
real_name = colnames(data)[i] ;
colnames(data)[i] = "X";
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,mean))
colnames(data)[i] = real_name;
print(paste(i,": ",real_name, sep = ""))
#   comment <- paste("Average of varaiable ",var_name,": ID(rows) vs. Activity(columns)",sep = "")
#   write(comment, "output_data", append = TRUE, sep = " ")
write(x=t(data_out), file="output_data", ncolumns = 6, append = TRUE, sep = " ")
}
t(subset_feat)
t(c(1:86),subset_feat)
c(c(1:86),subset_feat)
cbind(c(1:86),subset_feat)
subset_feat_for_txt <- cbind(c(1:86),subset_feat)
t(subset_feat_for_txt )
write(x=t(subset_feat_for_txt), file="output_features.txt", ncolumns = 1, append = TRUE, sep = " ")
paste(c(1:86))
paste(c(1:86),subset_feat)
subset_feat_for_txt <- paste(c(1:86),subset_feat)
if (file.exists("output_features.txt")){
file.remove("output_features.txt")
}
subset_feat_for_txt <- paste(c(1:length(subset_feat)),subset_feat)
write(x=t(subset_feat_for_txt), file="output_features.txt", ncolumns = 2, append = TRUE, sep = " ")
data_tidy <- read.table(file = "./output_data")
if (file.exists("output_features.txt")){
file.remove("output_features.txt")
}
subset_feat_for_txt <- paste(c(1:length(subset_feat)),subset_feat)
write(x=t(subset_feat_for_txt), file="output_features.txt", ncolumns = 1, append = TRUE, sep = " ")
data_tidy <- read.table(file = "./output_data")
## Clear the workspace
rm(list = ls())
setwd("/home/vedrana/Documents/R/UCI HAR Programming Assignment")
## 1 - Merge the training and the test sets to create one data set.
# Read and merge all train data
mydata0 <- read.table(file = "./UCI HAR Dataset/train/subject_train.txt")
mydata1 <- read.table(file = "./UCI HAR Dataset/train/X_train.txt")
mydata2 <- read.table(file = "./UCI HAR Dataset/train/y_train.txt")
train   <- cbind(mydata0, mydata2, mydata1)
colnames(train)[1:2] = c("ID","Activity")
# Read and merge all test data
mydata0 <- read.table(file = "./UCI HAR Dataset/test/subject_test.txt")
mydata1 <- read.table(file = "./UCI HAR Dataset/test/X_test.txt")
mydata2 <- read.table(file = "./UCI HAR Dataset/test/y_test.txt")
test    <- cbind(mydata0, mydata2, mydata1)
colnames(test)[1:2] = c("ID","Activity")
# Merge train and test data
dataset <- rbind(train,test)
# Create readable names for variables
feat <- read.table(file = "./UCI HAR Dataset/features.txt");
feat <- feat[,2]
feat <- gsub("-", "_", feat)
feat <- gsub("\\(\\)", "", feat)
feat <- gsub("\\(", "_", feat)
feat <- gsub("\\)", "", feat)
feat <- gsub("\\,", "_", feat)
# colnames(dataset)[3:(length(feat)+2)] <- as.character(feat);
## 2 - Extract only the measurements on the mean and standard deviation for each measurement.
# Go through the variable names and look for names that include one of the following:
# "mean","Mean","std","Std"
ind_log <- vector(mode="numeric", length=length(feat))
for (i in 1:length(feat)){
var         <- as.character(feat[i])
ind_log[i]  <- grep("mean",var) || grep("Mean",var) || grep("std",var) || grep("Std",var)
}
subset_ind <- !is.na(ind_log)
subset_feat <- feat[subset_ind]
data <- dataset[,subset_ind]
## 3 Uses descriptive activity names to name the activities in the data set
dataset$Activity <- factor(dataset$Activity,
labels = c("WALKING", "WALKING_UPSTAIRS", "WALKING_DOWNSTAIRS",
"SITTING", "STANDING", "LAYING"))
## 4 Appropriately labels the data set with descriptive variable names.
colnames(dataset)[3:(length(subset_feat)+2)] <- as.character(subset_feat);
## 5 From the data set in step 4, creates a second, independent tidy data set with
# the average of each variable for each activity and each subject.
# This comment helped me:
# Each user has performed a number of activities.
# That is, you should group by user and by activities and calculate
# the average of each variable for each group.
if (file.exists("OutputData.txt")){
file.remove("OutputData.txt")
}
print("Writing in the text file:")
variables_range <- 3:(length(colnames(data)))
for (i in variables_range){
real_name = colnames(data)[i] ;
colnames(data)[i] = "X";
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,mean))
colnames(data)[i] = real_name;
print(paste(i,": ",real_name, sep = ""))
#   comment <- paste("Average of varaiable ",var_name,": ID(rows) vs. Activity(columns)",sep = "")
#   write(comment, "OutputData", append = TRUE, sep = " ")
write(x=t(data_out), file="OutputData.txt", ncolumns = 6, append = TRUE, sep = " ")
}
if (file.exists("OutputVariables.txt")){
file.remove("OutputVariables.txt")
}
subset_feat_for_txt <- paste(c(1:length(subset_feat)),subset_feat)
write(x=t(subset_feat_for_txt), file="OutputVariables.txt", ncolumns = 1, append = TRUE, sep = " ")
data_tidy <- read.table(file = "./OutputData.txt")
i=33
real_name = colnames(data)[i] ;
colnames(data)[i] = "X";
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,mean))
colnames(data)[i] = real_name;
print(paste(i,": ",real_name, sep = ""))
data_out
i=35
real_name = colnames(data)[i] ;
colnames(data)[i] = "X";
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,mean))
data_out
i
data_out
i=3
real_name = colnames(data)[i] ;
colnames(data)[i] = "X";
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,mean))
colnames(data)[i] = real_name;
print(paste(i,": ",real_name, sep = ""))
data_out
i=33
real_name = colnames(data)[i] ;
colnames(data)[i] = "X";
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,mean))
colnames(data)[i] = real_name;
colnames(data)[i]
real_name = colnames(data)[i]
real_name
i=31
i=33
## Clear the workspace
rm(list = ls())
setwd("/home/vedrana/Documents/R/UCI HAR Programming Assignment")
## 1 - Merge the training and the test sets to create one data set.
# Read and merge all train data
mydata0 <- read.table(file = "./UCI HAR Dataset/train/subject_train.txt")
mydata1 <- read.table(file = "./UCI HAR Dataset/train/X_train.txt")
mydata2 <- read.table(file = "./UCI HAR Dataset/train/y_train.txt")
train   <- cbind(mydata0, mydata2, mydata1)
colnames(train)[1:2] = c("ID","Activity")
# Read and merge all test data
mydata0 <- read.table(file = "./UCI HAR Dataset/test/subject_test.txt")
mydata1 <- read.table(file = "./UCI HAR Dataset/test/X_test.txt")
mydata2 <- read.table(file = "./UCI HAR Dataset/test/y_test.txt")
test    <- cbind(mydata0, mydata2, mydata1)
colnames(test)[1:2] = c("ID","Activity")
# Merge train and test data
dataset <- rbind(train,test)
# Create readable names for variables
feat <- read.table(file = "./UCI HAR Dataset/features.txt");
feat <- feat[,2]
feat <- gsub("-", "_", feat)
feat <- gsub("\\(\\)", "", feat)
feat <- gsub("\\(", "_", feat)
feat <- gsub("\\)", "", feat)
feat <- gsub("\\,", "_", feat)
# colnames(dataset)[3:(length(feat)+2)] <- as.character(feat);
## 2 - Extract only the measurements on the mean and standard deviation for each measurement.
# Go through the variable names and look for names that include one of the following:
# "mean","Mean","std","Std"
ind_log <- vector(mode="numeric", length=length(feat))
for (i in 1:length(feat)){
var         <- as.character(feat[i])
ind_log[i]  <- grep("mean",var) || grep("Mean",var) || grep("std",var) || grep("Std",var)
}
subset_ind <- !is.na(ind_log)
subset_feat <- feat[subset_ind]
data <- dataset[,subset_ind]
## 3 Uses descriptive activity names to name the activities in the data set
dataset$Activity <- factor(dataset$Activity,
labels = c("WALKING", "WALKING_UPSTAIRS", "WALKING_DOWNSTAIRS",
"SITTING", "STANDING", "LAYING"))
## 4 Appropriately labels the data set with descriptive variable names.
colnames(dataset)[3:(length(subset_feat)+2)] <- as.character(subset_feat);
if (file.exists("OutputData.txt")){
file.remove("OutputData.txt")
}
print("Writing in the text file:")
variables_range <- 3:(length(colnames(data)))
i=33
real_name = colnames(data)[i] ;
colnames(data)[i] = "X";
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,mean))
colnames(data)[i] = real_name
real_name
## 3 Uses descriptive activity names to name the activities in the data set
dataset$Activity <- factor(dataset$Activity,
labels = c("WALKING", "WALKING_UPSTAIRS", "WALKING_DOWNSTAIRS",
"SITTING", "STANDING", "LAYING"))
## 4 Appropriately labels the data set with descriptive variable names.
colnames(data)[3:(length(subset_feat)+2)] <- as.character(subset_feat);
if (file.exists("OutputData.txt")){
file.remove("OutputData.txt")
}
print("Writing in the text file:")
variables_range <- 3:(length(colnames(data)))
real_name = colnames(data)[i] ;
colnames(data)[i] = "X";
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,mean))
colnames(data)[i] = real_name;
real_name
data_out
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,sum))
real_name = colnames(data)[i]
colnames(data)[i] = "X"
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,sum))
data_out
i
i=32
real_name = colnames(data)[i]
colnames(data)[i] = "X"
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,mean))
colnames(data)[i] = real_name
print(paste(i,": ",real_name, sep = ""))
data_oout
data_out
for (i in variables_range){
real_name = colnames(data)[i]
colnames(data)[i] = "X"
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,mean))
dataout[1,1]
colnames(data)[i] = real_name
print(paste(i,": ",real_name, sep = ""))
#   comment <- paste("Average of varaiable ",var_name,": ID(rows) vs. Activity(columns)",sep = "")
#   write(comment, "OutputData", append = TRUE, sep = " ")
write(x=t(data_out), file="OutputData.txt", ncolumns = 6, append = TRUE, sep = " ")
}
for (i in variables_range){
real_name = colnames(data)[i]
colnames(data)[i] = "X"
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,mean))
data_out[1,1]
colnames(data)[i] = real_name
print(paste(i,": ",real_name, sep = ""))
#   comment <- paste("Average of varaiable ",var_name,": ID(rows) vs. Activity(columns)",sep = "")
#   write(comment, "OutputData", append = TRUE, sep = " ")
write(x=t(data_out), file="OutputData.txt", ncolumns = 6, append = TRUE, sep = " ")
}
for (i in variables_range){
real_name = colnames(data)[i]
colnames(data)[i] = "X"
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,mean))
print(data_out[1,1])
colnames(data)[i] = real_name
#print(paste(i,": ",real_name, sep = ""))
#   comment <- paste("Average of varaiable ",var_name,": ID(rows) vs. Activity(columns)",sep = "")
#   write(comment, "OutputData", append = TRUE, sep = " ")
write(x=t(data_out), file="OutputData.txt", ncolumns = 6, append = TRUE, sep = " ")
}
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,mean))
data_out
data_out[1,1]
data_out[1,2]
i
variables_range
i=3
real_name = colnames(data)[i]
colnames(data)[i] = "X"
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,mean))
colnames(data)[i] = real_name
print(data_out[1,1])
i=2
i=4
real_name = colnames(data)[i]
colnames(data)[i] = "X"
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,mean))
colnames(data)[i] = real_name
print(data_out[1,1])
real_name = colnames(data)[i]
colnames(data)[i] = "X"
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,mean))
colnames(data)[i] = real_name
print(data_out[1,1])
data_out
## 4 Appropriately labels the data set with descriptive variable names.
colnames(data)[3:(length(subset_feat)+2)] <- as.character(subset_feat);
## 5 From the data set in step 4, creates a second, independent tidy data set with
# the average of each variable for each activity and each subject.
# This comment helped me:
# Each user has performed a number of activities.
# That is, you should group by user and by activities and calculate
# the average of each variable for each group.
if (file.exists("OutputData.txt")){
file.remove("OutputData.txt")
}
print("Writing in the text file:")
variables_range <- 3:(length(colnames(data)))
for (i in variables_range){
real_name = colnames(data)[i]
colnames(data)[i] = "X"
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,mean))
colnames(data)[i] = real_name
print(data_out[1,1])
#print(paste(i,": ",real_name, sep = ""))
#   comment <- paste("Average of varaiable ",var_name,": ID(rows) vs. Activity(columns)",sep = "")
#   write(comment, "OutputData", append = TRUE, sep = " ")
write(x=t(data_out), file="OutputData.txt", ncolumns = 6, append = TRUE, sep = " ")
}
aggregate(data[, 3:dim(data)[2]],
list(data$ID,
data$Activity),
mean)
# Compute the averages grouped by subject and activity
tidy <- aggregate(data[, 3:dim(data)[2]],
list(data$ID,
data$Activity),
mean)
print("Writing in the text file:")
variables_range <- 3:(length(colnames(data)))
for (i in variables_range){
real_name = colnames(data)[i]
colnames(data)[i] = "X"
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,mean))
colnames(data)[i] = real_name
print(data_out[1,1])
#print(paste(i,": ",real_name, sep = ""))
#   comment <- paste("Average of varaiable ",var_name,": ID(rows) vs. Activity(columns)",sep = "")
#   write(comment, "OutputData", append = TRUE, sep = " ")
write(x=t(data_out), file="OutputData.txt", ncolumns = 6, append = TRUE, sep = " ")
}
i=33
real_name = colnames(data)[i]
colnames(data)[i] = "X"
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,mean))
colnames(data)[i] = real_name
print(data_out[1,1])
write(x=t(data_out), file="OutputData2.txt", ncolumns = 6, append = TRUE, sep = " ")
data_out <- aggregate(data[, 3:dim(data)[2]], list(data$ID,data$Activity),mean)
data_out <- aggregate(data[, 3:dim(data)[2]], list(data$ID,data$Activity),mean)
write(x=t(data_out), file="OutputData2.txt", ncolumns = 6, append = TRUE, sep = " ")
real_name = colnames(data)[i]
colnames(data)[i] = "X"
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,mean))
colnames(data)[i] = real_name
print(data_out[1,1])
data_out
data_out
cbind(data_out, c(1,nrow(data:out)))
rep(1,nrow(data_out))
cbind(data_out,rep(1,nrow(data_out)))
if (file.exists("OutputData.txt")){
file.remove("OutputData.txt")
}
print("Writing in the text file:")
variables_range <- 3:(length(colnames(data)))
for (i in variables_range){
real_name = colnames(data)[i]
colnames(data)[i] = "X"
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,mean))
colnames(data)[i] = real_name
print(paste(i,": ",real_name, sep = ""))
#   comment <- paste("Average of varaiable ",var_name,": ID(rows) vs. Activity(columns)",sep = "")
#   write(comment, "OutputData", append = TRUE, sep = " ")
data_out <- cbind(data_out,rep(i-2,nrow(data_out)))
write(x=t(data_out), file="OutputData.txt", ncolumns = 7, append = TRUE, sep = " ")
}
data_tidy <- read.table(file = "./OutputData.txt",header=TRUE)
data_tidy
factor(data$Activity)
levels(data$Activity)
level(data$Activity)
levels(data$Activity)
levels(data)
labels
activities <- c("WALKING", "WALKING_UPSTAIRS", "WALKING_DOWNSTAIRS", "SITTING", "STANDING", "LAYING")
dataset$Activity <- factor(dataset$Activity, labels = activities)
header = paste(activities,"variable")
write(x=t(header), file="OutputData.txt", ncolumns = 7, append = TRUE, sep = " ")
variables_range <- 3:(length(colnames(data)))
for (i in variables_range){
real_name = colnames(data)[i]
colnames(data)[i] = "X"
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,mean))
colnames(data)[i] = real_name
print(paste(i,": ",real_name, sep = ""))
#   comment <- paste("Average of varaiable ",var_name,": ID(rows) vs. Activity(columns)",sep = "")
#   write(comment, "OutputData", append = TRUE, sep = " ")
data_out <- cbind(data_out,rep(i-2,nrow(data_out)))
write(x=t(data_out), file="OutputData.txt", ncolumns = 7, append = TRUE, sep = " ")
}
data_tidy <- read.table(file = "./OutputData.txt", header = TRUE)
paste(c(1:length(subset_feat)),subset_feat)
paste(c(1:length(subset_feat)),subset_feat)
paste(activities,"variable")
header = cbind(activities,"variable")
header = rbind(activities,"variable")
header = c(activities,"variable")
if (file.exists("OutputData.txt")){
file.remove("OutputData.txt")
}
print("Writing in the text file:")
header = c(activities,"variable")
write(x=t(header), file="OutputData.txt", ncolumns = 7, append = TRUE, sep = " ")
variables_range <- 3:(length(colnames(data)))
for (i in variables_range){
real_name = colnames(data)[i]
colnames(data)[i] = "X"
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,mean))
colnames(data)[i] = real_name
print(paste(i,": ",real_name, sep = ""))
#   comment <- paste("Average of varaiable ",var_name,": ID(rows) vs. Activity(columns)",sep = "")
#   write(comment, "OutputData", append = TRUE, sep = " ")
data_out <- cbind(data_out,rep(i-2,nrow(data_out)))
write(x=t(data_out), file="OutputData.txt", ncolumns = 7, append = TRUE, sep = " ")
}
data_tidy <- read.table(file = "./OutputData.txt", header = TRUE)
data_tidy
data_tidy$variable
factor(1)
factor(2)
data_out <- cbind(data_out,factor(rep(i-2,nrow(data_out))))
data_out
data_out
factor(rep(i-2,nrow(data_out)))
data_tidy <- read.table(file = "./OutputData.txt", header = TRUE)
data_tidy
data_tidy$variable
factor(data_tidy$variable)
data_tidy$variable<-factor(data_tidy$variable)
## Clear the workspace
rm(list = ls())
setwd("/home/vedrana/Documents/R/UCI HAR Programming Assignment")
## 1 - Merge the training and the test sets to create one data set.
# Read and merge all train data
mydata0 <- read.table(file = "./UCI HAR Dataset/train/subject_train.txt")
mydata1 <- read.table(file = "./UCI HAR Dataset/train/X_train.txt")
mydata2 <- read.table(file = "./UCI HAR Dataset/train/y_train.txt")
train   <- cbind(mydata0, mydata2, mydata1)
colnames(train)[1:2] = c("ID","Activity")
# Read and merge all test data
mydata0 <- read.table(file = "./UCI HAR Dataset/test/subject_test.txt")
mydata1 <- read.table(file = "./UCI HAR Dataset/test/X_test.txt")
mydata2 <- read.table(file = "./UCI HAR Dataset/test/y_test.txt")
test    <- cbind(mydata0, mydata2, mydata1)
colnames(test)[1:2] = c("ID","Activity")
# Merge train and test data
dataset <- rbind(train,test)
# Create readable names for variables
feat <- read.table(file = "./UCI HAR Dataset/features.txt");
feat <- feat[,2]
feat <- gsub("-", "_", feat)
feat <- gsub("\\(\\)", "", feat)
feat <- gsub("\\(", "_", feat)
feat <- gsub("\\)", "", feat)
feat <- gsub("\\,", "_", feat)
# colnames(dataset)[3:(length(feat)+2)] <- as.character(feat);
## 2 - Extract only the measurements on the mean and standard deviation for each measurement.
# Go through the variable names and look for names that include one of the following:
# "mean","Mean","std","Std"
ind_log <- vector(mode="numeric", length=length(feat))
for (i in 1:length(feat)){
var         <- as.character(feat[i])
ind_log[i]  <- grep("mean",var) || grep("Mean",var) || grep("std",var) || grep("Std",var)
}
subset_ind <- !is.na(ind_log)
subset_feat <- feat[subset_ind]
data <- dataset[,subset_ind]
## 3 Uses descriptive activity names to name the activities in the data set
activities <- c("WALKING", "WALKING_UPSTAIRS", "WALKING_DOWNSTAIRS", "SITTING", "STANDING", "LAYING")
dataset$Activity <- factor(dataset$Activity, labels = activities)
## 4 Appropriately labels the data set with descriptive variable names.
colnames(data)[3:(length(subset_feat)+2)] <- as.character(subset_feat);
## 5 From the data set in step 4, creates a second, independent tidy data set with
# the average of each variable for each activity and each subject.
# This comment helped me:
# Each user has performed a number of activities.
# That is, you should group by user and by activities and calculate
# the average of each variable for each group.
# I add an extra column which can serve as a factor denoting the corresponding variable.
if (file.exists("OutputData.txt")){
file.remove("OutputData.txt")
}
print("Writing in the text file:")
header = c(activities,"variable")
write(x=t(header), file="OutputData.txt", ncolumns = 7, append = TRUE, sep = " ")
variables_range <- 3:(length(colnames(data)))
for (i in variables_range){
real_name = colnames(data)[i]
colnames(data)[i] = "X"
data_out = xtabs(X~ID + Activity,aggregate(X~ID + Activity,data,mean))
colnames(data)[i] = real_name
print(paste(i,": ",real_name, sep = ""))
#   comment <- paste("Average of varaiable ",var_name,": ID(rows) vs. Activity(columns)",sep = "")
#   write(comment, "OutputData", append = TRUE, sep = " ")
data_out <- cbind(data_out,rep(i-2,nrow(data_out)))
write(x=t(data_out), file="OutputData.txt", ncolumns = 7, append = TRUE, sep = " ")
}
# Alternative:
# data_out <- aggregate(data[, 3:dim(data)[2]], list(data$ID,data$Activity),mean)
# write(x=t(data_out), file="OutputData.txt", ncolumns = 6, append = TRUE, sep = " ")
## Write the output variables names in a separate file
if (file.exists("OutputVariables.txt")){
file.remove("OutputVariables.txt")
}
subset_feat_for_txt <- paste(c(1:length(subset_feat)),subset_feat)
write(x=t(subset_feat_for_txt), file="OutputVariables.txt", ncolumns = 1, append = TRUE, sep = " ")
## Read data
data_tidy <- read.table(file = "./OutputData.txt", header = TRUE)
data_tidy$variable<-factor(data_tidy$variable)
head(data_)
head(data_tidy)
ls
ls()
rm(ls())
list==ls()
list=ls()
